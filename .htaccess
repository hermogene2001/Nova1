Options +FollowSymLinks -Indexes
RewriteEngine On

# Handle trailing slash redirects
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /$
RewriteRule ^(.+)/$ /$1 [R=301,L]

# Handle .php extension removal
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

# Handle direct .php access - redirect to clean URL
RewriteCond %{THE_REQUEST} "^[^ ]* .*?\.php[? ].*$"
RewriteRule ^(.+)\.php$ /$1 [R=301,L]